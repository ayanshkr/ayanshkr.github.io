<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OGAS-C Interface â€” Confederation Build 4.7</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600&family=Caveat:wght@400;600&display=swap');

  :root {
    --amber:     #D4832A;
    --amber-dim: #A8621A;
    --cream:     #F5EDD8;
    --warm-bg:   #1C1409;
    --node-bg:   #2A1E0A;
    --node-rim:  #6B4A1C;
    --pulse:     #E8A24A;
    --green-acc: #5E9E6A;
    --red-acc:   #C0584A;
    --text-main: #EBD8B0;
    --text-dim:  #8A7055;
    --link-line: rgba(180,120,40,0.35);
  }

  * { margin:0; padding:0; box-sizing:border-box; }

  body {
    background: var(--warm-bg);
    font-family: 'Nunito', sans-serif;
    color: var(--text-main);
    height: 100vh;
    overflow: hidden;
    user-select: none;
  }

  /* â”€â”€ TOPBAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  #topbar {
    position: fixed; top:0; left:0; right:0; height:36px;
    background: rgba(28,20,9,0.92);
    border-bottom: 1px solid var(--node-rim);
    display: flex; align-items: center; gap:18px;
    padding: 0 18px;
    z-index: 100;
    backdrop-filter: blur(8px);
  }
  .tb-logo {
    font-family: 'Caveat', cursive;
    font-size: 17px;
    color: var(--amber);
    letter-spacing: 0.04em;
    white-space: nowrap;
  }
  .tb-sep { width:1px; height:18px; background:var(--node-rim); }
  .tb-item {
    font-size: 12px; color: var(--text-dim);
    cursor: pointer; padding: 2px 6px; border-radius:8px;
    transition: color 0.2s, background 0.2s;
  }
  .tb-item:hover { color: var(--text-main); background: rgba(180,120,40,0.12); }
  .tb-right { margin-left:auto; display:flex; gap:12px; align-items:center; }
  .tb-clock {
    font-size: 12px; color: var(--amber);
    font-family: 'Caveat', cursive; font-size:15px;
  }
  .tb-indicator {
    width:7px; height:7px; border-radius:50%;
    background: var(--green-acc);
    box-shadow: 0 0 6px var(--green-acc);
    animation: breathe 3s ease-in-out infinite;
  }
  @keyframes breathe {
    0%,100% { opacity:1; } 50% { opacity:0.4; }
  }

  /* â”€â”€ CANVAS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  #canvas {
    position: absolute;
    top:36px; left:0; right:0; bottom:28px;
    overflow: hidden;
  }

  svg#net {
    position:absolute; top:0; left:0;
    width:100%; height:100%;
    pointer-events:none;
  }

  /* â”€â”€ NODES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .node {
    position: absolute;
    display: flex; flex-direction:column; align-items:center;
    cursor: pointer;
    transition: transform 0.25s;
  }
  .node:hover { transform: scale(1.08); }
  .node:hover .n-core { box-shadow: 0 0 22px var(--pulse), 0 0 8px rgba(230,160,60,0.5); }
  .node:hover .n-label { color: var(--text-main); }

  .n-core {
    border-radius: 50%;
    border: 1.5px solid var(--node-rim);
    background: radial-gradient(circle at 35% 30%, #3D2B0F, #1E1408);
    box-shadow: 0 0 12px rgba(120,70,10,0.4), inset 0 1px 0 rgba(255,200,100,0.1);
    display:flex; align-items:center; justify-content:center;
    transition: box-shadow 0.3s;
    position: relative;
  }
  .n-core::after {
    content:'';
    position:absolute; inset:3px;
    border-radius:50%;
    border:1px solid rgba(200,150,60,0.15);
  }
  .n-icon { font-size: 18px; }
  .n-label {
    margin-top: 7px;
    font-size: 11px; color: var(--text-dim);
    text-align:center; white-space:nowrap;
    transition: color 0.2s;
    letter-spacing:0.03em;
  }
  .n-sublabel {
    font-size: 9px; color: #5A4530;
    margin-top:2px; text-align:center;
  }

  /* size variants */
  .sz-lg .n-core { width:72px; height:72px; }
  .sz-md .n-core { width:52px; height:52px; }
  .sz-sm .n-core { width:38px; height:38px; }
  .sz-sm .n-icon { font-size:14px; }

  /* open/active state */
  .node.active .n-core {
    border-color: var(--amber);
    box-shadow: 0 0 24px rgba(212,131,42,0.6), 0 0 8px rgba(230,160,60,0.4);
  }
  .node.active .n-label { color: var(--amber); }

  /* pulse ring on primary node */
  .node.hub .n-core::before {
    content:'';
    position:absolute; inset:-8px;
    border-radius:50%;
    border:1px solid rgba(212,131,42,0.25);
    animation: ring-pulse 4s ease-out infinite;
  }
  @keyframes ring-pulse {
    0%   { transform:scale(1);   opacity:0.6; }
    100% { transform:scale(1.5); opacity:0; }
  }

  /* â”€â”€ PANEL (right side) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  #panel {
    position:absolute; right:0; top:0; bottom:0; width:280px;
    background: rgba(22,14,4,0.85);
    border-left: 1px solid var(--node-rim);
    backdrop-filter: blur(10px);
    display:flex; flex-direction:column;
    padding:20px 0;
    gap:0;
  }
  .panel-title {
    padding: 0 20px 14px;
    font-family:'Caveat', cursive;
    font-size:18px; color:var(--amber);
    border-bottom:1px solid rgba(107,74,28,0.4);
    letter-spacing:0.04em;
  }
  .panel-section {
    padding: 14px 20px;
    border-bottom:1px solid rgba(107,74,28,0.2);
  }
  .ps-head {
    font-size:10px; text-transform:uppercase;
    letter-spacing:0.15em; color:var(--text-dim);
    margin-bottom:10px;
  }
  .ps-entry {
    display:flex; align-items:center; gap:10px;
    padding: 7px 10px; border-radius:12px;
    cursor:pointer;
    transition: background 0.2s;
    margin-bottom:3px;
  }
  .ps-entry:hover { background: rgba(180,120,40,0.1); }
  .ps-dot {
    width:8px; height:8px; border-radius:50%; flex-shrink:0;
  }
  .ps-label { font-size:12px; color:var(--text-main); }
  .ps-sub   { font-size:10px; color:var(--text-dim); margin-top:1px; }
  .ps-badge {
    margin-left:auto; font-size:9px;
    background: rgba(90,160,100,0.2);
    color:var(--green-acc); border-radius:8px;
    padding:1px 7px;
  }
  .ps-badge.warn {
    background:rgba(192,88,74,0.2); color:var(--red-acc);
  }

  /* flow meter */
  .flow-bar {
    height:3px; border-radius:3px;
    background: rgba(107,74,28,0.3);
    margin-top:6px; overflow:hidden;
  }
  .flow-fill {
    height:100%; border-radius:3px;
    background: linear-gradient(90deg, var(--amber-dim), var(--pulse));
    animation: flow-anim 3s ease-in-out infinite alternate;
  }
  @keyframes flow-anim {
    from { width:38%; } to { width:72%; }
  }

  /* search strip */
  #search-strip {
    margin-top:auto; padding:14px 20px;
    border-top:1px solid rgba(107,74,28,0.4);
  }
  .search-box {
    width:100%; background:rgba(40,28,10,0.9);
    border:1px solid var(--node-rim);
    border-radius:20px; padding:7px 14px;
    color:var(--text-main); font-family:'Nunito',sans-serif;
    font-size:12px; outline:none;
    transition: border-color 0.2s, box-shadow 0.2s;
  }
  .search-box::placeholder { color:var(--text-dim); }
  .search-box:focus {
    border-color:var(--amber);
    box-shadow: 0 0 0 2px rgba(212,131,42,0.18);
  }

  /* â”€â”€ FLOATING INFO CARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  #info-card {
    position:absolute; left:20px; bottom:50px;
    width:230px;
    background:rgba(26,17,6,0.93);
    border:1px solid var(--node-rim);
    border-radius:18px; padding:16px;
    backdrop-filter:blur(12px);
    opacity:0; transform:translateY(10px);
    transition:opacity 0.3s, transform 0.3s;
    pointer-events:none;
    z-index:50;
  }
  #info-card.show { opacity:1; transform:translateY(0); pointer-events:all; }
  .ic-title { font-family:'Caveat',cursive; font-size:16px; color:var(--amber); margin-bottom:6px; }
  .ic-body  { font-size:11px; color:var(--text-dim); line-height:1.7; }
  .ic-tag   {
    display:inline-block; margin-top:8px;
    font-size:9px; text-transform:uppercase; letter-spacing:0.12em;
    background:rgba(180,120,40,0.12); color:var(--amber);
    border-radius:8px; padding:2px 8px;
  }
  .ic-close {
    position:absolute; top:10px; right:12px;
    font-size:14px; color:var(--text-dim); cursor:pointer;
    transition:color 0.2s;
  }
  .ic-close:hover { color:var(--text-main); }

  /* â”€â”€ NOTIFICATION TOAST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  #toast {
    position:absolute; top:54px; left:50%; transform:translateX(-50%) translateY(-10px);
    background:rgba(30,22,8,0.95); border:1px solid var(--amber);
    border-radius:14px; padding:9px 18px;
    font-size:12px; color:var(--text-main);
    opacity:0; transition:opacity 0.3s, transform 0.3s;
    pointer-events:none; z-index:200; white-space:nowrap;
    box-shadow: 0 0 16px rgba(212,131,42,0.25);
  }
  #toast.show { opacity:1; transform:translateX(-50%) translateY(0); }

  /* â”€â”€ TASKBAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  #taskbar {
    position:fixed; bottom:0; left:0; right:0; height:28px;
    background:rgba(18,12,4,0.95);
    border-top:1px solid var(--node-rim);
    display:flex; align-items:center; padding:0 16px; gap:16px;
    font-size:10px; color:var(--text-dim);
    z-index:100;
  }
  .task-node {
    display:flex; align-items:center; gap:5px;
    cursor:pointer; padding:2px 8px; border-radius:8px;
    transition:background 0.2s, color 0.2s;
  }
  .task-node:hover { background:rgba(180,120,40,0.1); color:var(--text-main); }
  .task-node.running::before {
    content:''; width:4px; height:4px; border-radius:50%;
    background:var(--green-acc);
    box-shadow:0 0 4px var(--green-acc);
  }
  .taskbar-right { margin-left:auto; display:flex; gap:14px; align-items:center; }
  .net-stat { color:var(--amber); font-family:'Caveat',cursive; font-size:13px; }

  /* â”€â”€ DECORATIVE GRAIN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  #grain {
    position:fixed; inset:0; pointer-events:none; z-index:999;
    opacity:0.025;
    background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  }
</style>
</head>
<body>

<div id="grain"></div>

<!-- TOPBAR -->
<div id="topbar">
  <span class="tb-logo">ĞĞ“ĞĞ¡-Ğš  Â·  Confederation Build 4.7</span>
  <div class="tb-sep"></div>
  <span class="tb-item">Ğ¡ĞµÑ‚ÑŒ</span>
  <span class="tb-item">Ğ£Ğ·Ğ»Ñ‹</span>
  <span class="tb-item">ĞŸĞ¾Ñ‚Ğ¾Ğº</span>
  <span class="tb-item">Ğ¡Ğ¿Ñ€Ğ°Ğ²ĞºĞ°</span>
  <div class="tb-right">
    <div class="tb-indicator"></div>
    <span class="tb-clock" id="clock">â€”</span>
  </div>
</div>

<!-- MAIN CANVAS -->
<div id="canvas">

  <!-- SVG connection lines -->
  <svg id="net">
    <defs>
      <marker id="arr" markerWidth="6" markerHeight="6" refX="3" refY="3" orient="auto">
        <circle cx="3" cy="3" r="1.5" fill="rgba(180,120,40,0.5)"/>
      </marker>
    </defs>
  </svg>

  <!-- NODES: defined in JS, rendered here -->

  <!-- PANEL -->
  <div id="panel">
    <div class="panel-title">ĞĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ¸</div>

    <div class="panel-section">
      <div class="ps-head">Ğ£Ğ·Ğ»Ñ‹ ÑĞµÑ‚Ğ¸</div>
      <div class="ps-entry" onclick="showToast('Ğ¡Ğ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ Ñ Ğ¡Ğ¾ÑĞ·Ğ½Ñ‹Ğ¼ ÑĞ´Ñ€Ğ¾Ğ¼ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾')">
        <div class="ps-dot" style="background:#5E9E6A;box-shadow:0 0 5px #5E9E6A"></div>
        <div><div class="ps-label">Ğ¡Ğ¾ÑĞ·Ğ½Ğ¾Ğµ ÑĞ´Ñ€Ğ¾</div><div class="ps-sub">ĞœĞ¾ÑĞºĞ²Ğ° â€” 4.2 Ğ¼Ñ</div></div>
        <div class="ps-badge">Ğ¾Ğ½Ğ»Ğ°Ğ¹Ğ½</div>
      </div>
      <div class="ps-entry" onclick="showToast('Ğ¡Ğ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ Ñ Ğ“ĞµĞ¸ÑÑ‚ÑĞºĞ¸Ğ¼ ÑƒĞ·Ğ»Ğ¾Ğ¼ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾')">
        <div class="ps-dot" style="background:#5E9E6A;box-shadow:0 0 5px #5E9E6A"></div>
        <div><div class="ps-label">Ğ“ĞµĞ¸ÑÑ‚ÑĞºĞ¸Ğ¹ ÑƒĞ·ĞµĞ»</div><div class="ps-sub">Ğ‘ĞµÑ€Ğ»Ğ¸Ğ½ â€” 11.8 Ğ¼Ñ</div></div>
        <div class="ps-badge">Ğ¾Ğ½Ğ»Ğ°Ğ¹Ğ½</div>
      </div>
      <div class="ps-entry" onclick="showToast('Ğ¡Ğ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ Ñ Ğ¢Ğ¸Ñ…Ğ¾Ğ¾ĞºĞµĞ°Ğ½ÑĞºĞ¸Ğ¼ Ñ€ĞµÑ‚Ñ€Ğ°Ğ½ÑĞ». Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¾')">
        <div class="ps-dot" style="background:#D4832A;box-shadow:0 0 5px #D4832A"></div>
        <div><div class="ps-label">Ğ¢Ğ¸Ñ…Ğ¾Ğ¾ĞºĞµĞ°Ğ½ÑĞºĞ¸Ğ¹ Ñ€ĞµÑ‚Ñ€Ğ°Ğ½ÑĞ».</div><div class="ps-sub">ĞœĞ°Ğ½Ğ¸Ğ»Ğ° â€” 38.1 Ğ¼Ñ</div></div>
        <div class="ps-badge warn">ÑĞ»Ğ°Ğ±Ñ‹Ğ¹</div>
      </div>
    </div>

    <div class="panel-section">
      <div class="ps-head">ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…</div>
      <div class="ps-label" style="font-size:11px;color:var(--text-dim);margin-bottom:6px">
        Ğ’Ñ…Ğ¾Ğ´ÑÑ‰Ğ¸Ğ¹ / Ğ˜ÑÑ…Ğ¾Ğ´ÑÑ‰Ğ¸Ğ¹
      </div>
      <div class="flow-bar"><div class="flow-fill"></div></div>
      <div style="display:flex;justify-content:space-between;margin-top:5px">
        <span style="font-size:10px;color:var(--text-dim)">â–¼ 2.4 ĞšĞ±/Ñ</span>
        <span style="font-size:10px;color:var(--text-dim)">â–² 0.8 ĞšĞ±/Ñ</span>
      </div>
    </div>

    <div class="panel-section">
      <div class="ps-head">Ğ¡ÑƒĞ±ÑÑ‚Ñ€Ğ°Ñ‚-Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³</div>
      <div class="ps-entry">
        <div class="ps-dot" style="background:#A888CC;box-shadow:0 0 5px #A888CC"></div>
        <div><div class="ps-label">Ğ—Ğ¾Ğ½Ğ´ ĞœĞ¡-7 Ğ°ĞºÑ‚Ğ¸Ğ²ĞµĞ½</div><div class="ps-sub">Ğ¡Ğ¸Ğ³Ğ½Ğ°Ğ» ÑÑ‚Ğ°Ğ±Ğ¸Ğ»ĞµĞ½</div></div>
      </div>
      <div class="ps-entry" onclick="showToast('ĞĞ½Ğ¾Ğ¼Ğ°Ğ»Ğ¸Ñ Ğ·Ğ°Ñ„Ğ¸ĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ°. ĞšĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ: Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚Ğ¾.')">
        <div class="ps-dot" style="background:var(--red-acc);box-shadow:0 0 5px var(--red-acc)"></div>
        <div><div class="ps-label">ĞĞ½Ğ¾Ğ¼Ğ°Ğ»Ğ¸Ñ: Ğ®Ğ—-Ğ¾Ğ±ÑŠĞµĞºÑ‚</div><div class="ps-sub">ĞšĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ñ‹: Ğ·Ğ°ÑĞµĞºÑ€ĞµÑ‡ĞµĞ½Ğ¾</div></div>
        <div class="ps-badge warn">!!</div>
      </div>
    </div>

    <div id="search-strip">
      <input class="search-box" type="text" placeholder="ğŸ”  ĞŸĞ¾Ğ¸ÑĞº Ğ² ÑĞµÑ‚Ğ¸â€¦">
    </div>
  </div>

  <!-- INFO CARD -->
  <div id="info-card">
    <span class="ic-close" onclick="closeCard()">âœ•</span>
    <div class="ic-title" id="ic-title">â€”</div>
    <div class="ic-body"  id="ic-body">â€”</div>
    <span class="ic-tag"  id="ic-tag">â€”</span>
  </div>

  <div id="toast"></div>
</div>

<!-- TASKBAR -->
<div id="taskbar">
  <div class="task-node running">Ğ¡ĞµÑ‚ÑŒ</div>
  <div class="task-node running">ĞŸÑ€Ğ¾Ğ²Ğ¾Ğ´Ğ½Ğ¸Ğº</div>
  <div class="task-node">Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¾Ñ€</div>
  <div class="task-node">ĞÑ€Ñ…Ğ¸Ğ²</div>
  <div class="taskbar-right">
    <span class="net-stat" id="net-stat">â—â—â—‹  ĞĞ“ĞĞ¡-Ğš</span>
    <span style="font-size:10px;color:var(--text-dim)">Ğ¡ĞµĞ°Ğ½Ñ: nawiramu</span>
  </div>
</div>

<script>
// â”€â”€ clock â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function tick() {
  const now = new Date();
  const h = String(now.getHours()).padStart(2,'0');
  const m = String(now.getMinutes()).padStart(2,'0');
  const s = String(now.getSeconds()).padStart(2,'0');
  document.getElementById('clock').textContent = h + ':' + m + ':' + s;
}
tick(); setInterval(tick, 1000);

// â”€â”€ node data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const nodes = [
  {
    id:'home', icon:'ğŸ ', label:'Ğ”Ğ¾Ğ¼Ğ°ÑˆĞ½Ğ¸Ğ¹ ÑƒĞ·ĞµĞ»', sub:'Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹',
    x:0.22, y:0.38, size:'lg', hub:true,
    info:'Ğ›Ğ¸Ñ‡Ğ½Ğ¾Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‡ĞµĞµ Ğ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ÑÑ‚Ğ²Ğ¾. Ğ’ÑĞµ Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ¸ Ğ¸ÑÑ…Ğ¾Ğ´ÑÑ‚ Ğ¾Ñ‚ÑÑĞ´Ğ°.',
    tag:'ĞºĞ¾Ñ€Ğ½ĞµĞ²Ğ¾Ğ¹ ÑƒĞ·ĞµĞ»'
  },
  {
    id:'docs', icon:'ğŸ“„', label:'Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ñ‹', sub:'Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğµ',
    x:0.10, y:0.22, size:'md',
    info:'Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ. Ğ¤Ğ°Ğ¹Ğ»Ñ‹ Ğ¾Ñ€Ğ³Ğ°Ğ½Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ñ‹ Ğ¿Ğ¾ Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ°Ğ¼, Ğ½Ğµ Ğ¿Ğ¾ Ğ¿Ğ°Ğ¿ĞºĞ°Ğ¼.',
    tag:'Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ'
  },
  {
    id:'net', icon:'ğŸŒ', label:'ĞĞ±Ñ‰Ğ°Ñ ÑĞµÑ‚ÑŒ', sub:'ĞĞ“ĞĞ¡-Ğš',
    x:0.38, y:0.18, size:'md',
    info:'Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ğº ĞšĞ¾Ğ½Ñ„ĞµĞ´ĞµÑ€Ğ°Ñ‚Ğ¸Ğ²Ğ½Ğ¾Ğ¹ ÑĞµÑ‚Ğ¸. Ğ¢Ñ‘Ğ¿Ğ»Ñ‹Ğ¹ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ, Ğ½Ğµ Ğ¿Ñ€ÑĞ¼Ğ¾Ğ»Ğ¸Ğ½ĞµĞ¹Ğ½Ñ‹Ğ¹.',
    tag:'ÑĞµÑ‚ÑŒ'
  },
  {
    id:'media', icon:'ğŸï¸', label:'ĞœĞµĞ´Ğ¸Ğ°', sub:'Ğ°Ğ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ñ',
    x:0.10, y:0.58, size:'md',
    info:'ĞŸÑ€Ğ¾ĞµĞºÑ‚ "Ğ˜Ğ¢Ğ˜Ğœ". ĞŸĞ°Ğ¿ĞºĞ¸ ÑĞ¿Ğ¸Ğ·Ğ¾Ğ´Ğ¾Ğ², ÑÑƒĞ±ÑÑ‚Ñ€Ğ°Ñ‚Ğ½Ñ‹Ğµ Ğ³Ğ»Ğ¸Ñ„Ñ‹-Ñ€ĞµÑ„ĞµÑ€ĞµĞ½ÑÑ‹, Ñ‡ĞµÑ€Ğ½Ğ¾Ğ²Ğ¸ĞºĞ¸.',
    tag:'Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚', active:true
  },
  {
    id:'research', icon:'ğŸ”¬', label:'Ğ˜ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ', sub:'Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚Ğ¾',
    x:0.35, y:0.62, size:'md',
    info:'Ğ¡Ğ²ÑĞ·Ğ°Ğ½Ğ¾ Ñ ÑÑƒĞ±ÑÑ‚Ñ€Ğ°Ñ‚-Ğ°Ñ€Ñ…Ğ¸Ğ²Ğ¾Ğ¼. Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½ â€” Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ ĞºĞ»ÑÑ‡ ÑƒĞ·Ğ»Ğ°.',
    tag:'Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿'
  },
  {
    id:'msg', icon:'âœ‰ï¸', label:'Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ', sub:'Ğ²Ñ…Ğ¾Ğ´ÑÑ‰Ğ¸Ğµ: 3',
    x:0.52, y:0.30, size:'sm',
    info:'3 Ğ½ĞµĞ¿Ñ€Ğ¾Ñ‡Ğ¸Ñ‚Ğ°Ğ½Ğ½Ñ‹Ñ…. ĞĞ´Ğ½Ğ¾ Ğ¾Ñ‚: "Ğ·Ğ°Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑĞ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ğ°". ĞĞµĞ¿Ñ€Ğ¾Ñ‡Ğ¸Ñ‚Ğ°Ğ½Ğ¾.',
    tag:'Ğ²Ñ…Ğ¾Ğ´ÑÑ‰Ğ¸Ğµ'
  },
  {
    id:'music', icon:'ğŸµ', label:'Ğ—Ğ²ÑƒĞº', sub:'Ğ¿Ñ€Ğ¾ĞµĞºÑ‚',
    x:0.18, y:0.78, size:'sm',
    info:'Ğ¡Ğ°ÑƒĞ½Ğ´Ñ‚Ñ€ĞµĞº Ğº ÑĞ¿. 7. ĞĞµ Ğ·Ğ°Ğ²ĞµÑ€ÑˆÑ‘Ğ½. ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½ĞµĞµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ: Ğ²Ñ‡ĞµÑ€Ğ°, 02:47.',
    tag:'Ğ² Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğµ'
  },
  {
    id:'ext1', icon:'ğŸ”—', label:'Ğ¡Ğ¾ÑĞ·Ğ½Ñ‹Ğ¹ ÑƒĞ·ĞµĞ»', sub:'ĞœĞ¾ÑĞºĞ²Ğ°',
    x:0.58, y:0.55, size:'sm',
    info:'Ğ’Ğ½ĞµÑˆĞ½Ğ¸Ğ¹ ÑƒĞ·ĞµĞ». Ğ¡ÑƒĞ±ÑÑ‚Ñ€Ğ°Ñ‚-Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ¸Ñ€ÑƒÑÑ‚ÑÑ ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 6 Ñ‡Ğ°ÑĞ¾Ğ².',
    tag:'Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ğ¹'
  },
  {
    id:'ext2', icon:'ğŸ”—', label:'Ğ“ĞµĞ¸ÑÑ‚ÑĞºĞ¸Ğ¹ ÑƒĞ·ĞµĞ»', sub:'Ğ‘ĞµÑ€Ğ»Ğ¸Ğ½',
    x:0.65, y:0.38, size:'sm',
    info:'Ğ“ĞµĞ¸ÑÑ‚ÑĞºĞ¸Ğ¹ Ğ°Ğ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ»Ğ»ĞµĞºÑ‚Ğ¸Ğ². Ğ¡ĞµÑ€Ğ²ĞµÑ€ Â«natuklasanÂ» Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ.',
    tag:'Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ğ¹'
  },
  {
    id:'trash', icon:'ğŸŒ¿', label:'ĞÑ€Ñ…Ğ¸Ğ²', sub:'Ğ½ĞµĞ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾',
    x:0.48, y:0.75, size:'sm',
    info:'ĞÑ€Ñ…Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ ÑƒĞ·Ğ»Ñ‹. ĞĞ“ĞĞ¡ Ğ½Ğµ "ÑƒĞ´Ğ°Ğ»ÑĞµÑ‚" â€” Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ°Ñ€Ñ…Ğ¸Ğ²Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ¸.',
    tag:'Ğ°Ñ€Ñ…Ğ¸Ğ²'
  },
];

// connections: pairs of node IDs
const edges = [
  ['home','docs'],['home','net'],['home','media'],
  ['home','research'],['home','msg'],
  ['media','music'],['media','research'],
  ['net','ext1'],['net','ext2'],['net','msg'],
  ['research','ext1'],
  ['home','trash'],
];

// â”€â”€ render nodes â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const canvas = document.getElementById('canvas');
const panel  = document.getElementById('panel');
const panelW = 280;

function posX(rx) {
  const w = canvas.offsetWidth - panelW;
  return Math.round(rx * w);
}
function posY(ry) {
  const h = canvas.offsetHeight;
  return Math.round(ry * h);
}

const nodeEls = {};

nodes.forEach(n => {
  const el = document.createElement('div');
  el.className = 'node sz-' + n.size + (n.hub ? ' hub' : '') + (n.active ? ' active' : '');
  el.id = 'node-' + n.id;
  el.style.left = posX(n.x) + 'px';
  el.style.top  = posY(n.y) + 'px';
  el.style.transform = 'translate(-50%,-50%)';
  el.innerHTML = `
    <div class="n-core"><span class="n-icon">${n.icon}</span></div>
    <div class="n-label">${n.label}</div>
    ${n.sub ? `<div class="n-sublabel">${n.sub}</div>` : ''}
  `;
  el.addEventListener('click', () => openCard(n));
  canvas.appendChild(el);
  nodeEls[n.id] = el;
});

// â”€â”€ draw SVG edges â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function drawEdges() {
  const svg = document.getElementById('net');
  svg.innerHTML = `<defs>
    <marker id="arr" markerWidth="6" markerHeight="6" refX="3" refY="3" orient="auto">
      <circle cx="3" cy="3" r="1.5" fill="rgba(180,120,40,0.4)"/>
    </marker>
  </defs>`;

  edges.forEach(([a,b]) => {
    const ea = nodeEls[a], eb = nodeEls[b];
    if (!ea || !eb) return;
    const ax = parseFloat(ea.style.left);
    const ay = parseFloat(ea.style.top);
    const bx = parseFloat(eb.style.left);
    const by = parseFloat(eb.style.top);

    // organic cubic bezier
    const mx = (ax+bx)/2 + (Math.random()-0.5)*40;
    const my = (ay+by)/2 + (Math.random()-0.5)*40;

    const path = document.createElementNS('http://www.w3.org/2000/svg','path');
    path.setAttribute('d', `M${ax},${ay} Q${mx},${my} ${bx},${by}`);
    path.setAttribute('stroke', 'rgba(180,120,40,0.28)');
    path.setAttribute('stroke-width', '1.2');
    path.setAttribute('fill', 'none');
    path.setAttribute('marker-end', 'url(#arr)');
    svg.appendChild(path);
  });
}

drawEdges();
window.addEventListener('resize', () => {
  nodes.forEach(n => {
    const el = nodeEls[n.id];
    el.style.left = posX(n.x) + 'px';
    el.style.top  = posY(n.y) + 'px';
  });
  drawEdges();
});

// â”€â”€ info card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function openCard(n) {
  document.getElementById('ic-title').textContent = n.label;
  document.getElementById('ic-body').textContent  = n.info;
  document.getElementById('ic-tag').textContent   = n.tag;
  document.getElementById('info-card').classList.add('show');
}
function closeCard() {
  document.getElementById('info-card').classList.remove('show');
}

// â”€â”€ toast â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let toastTimer;
function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  clearTimeout(toastTimer);
  toastTimer = setTimeout(() => t.classList.remove('show'), 2800);
}

// â”€â”€ net stat flicker â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const stats = ['â—â—â—‹  ĞĞ“ĞĞ¡-Ğš','â—â—â—  ĞĞ“ĞĞ¡-Ğš','â—â—â—‹  ĞĞ“ĞĞ¡-Ğš'];
let si = 0;
setInterval(() => {
  si = (si+1) % stats.length;
  document.getElementById('net-stat').textContent = stats[si];
}, 3700);

// â”€â”€ ambient: random edge glow â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
setInterval(() => {
  const paths = document.querySelectorAll('#net path');
  if (!paths.length) return;
  const p = paths[Math.floor(Math.random()*paths.length)];
  p.style.stroke = 'rgba(212,131,42,0.65)';
  p.style.transition = 'stroke 0.3s';
  setTimeout(() => {
    p.style.stroke = 'rgba(180,120,40,0.28)';
  }, 600);
}, 1400);
</script>
</body>
</html>
